<html>
    <head>
        <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
        <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
        <script src="https://rawgit.com/fernandojsg/aframe-teleport-controls/master/dist/aframe-teleport-controls.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>  
 
        <!-- <script src="aframe-extras.min.js"></script> -->
        <!-- <script src="aframe-physics-system.min.js"></script> -->

        <title>Borno's Valentine gift</title>
        <script>
            alert("Caution: The performance of this application may be varied due to internet speed and your device. Please keep your patience!")
        </script>
    </head>
    <body style="user-select: none; -webkit-app-region:drag;">

        <a-scene loading-screen="dotsColor: blue; backgroundColor:skyblue" vr-mode-ui="enabled:false" physics="debug: false">
            <!-- assets -->
            <a-assets>
                <img id="concrete_texture" src="textures/concrete_texture.jpg">
                <img id="white_marbel" src="textures/white_marbel_tiles.jpg">
                <img id="sky_texture" src="textures/clear_sky.jpeg">
                <img id="grass_texture" src="textures/grass(1).jpg">
                <img id="brick" src="textures/brick_texture.jpg">
                
                <a-asset-item id="model" src="models/building129.glb"></a-asset-item>
                <a-asset-item id="bed" src="models/bed.glb"></a-asset-item>
                <a-asset-item id="sofa" src="models/sofa.glb"></a-asset-item>
                <a-asset-item id="tv" src="models/tv.glb"></a-asset-item>
                <a-asset-item id="freez" src="models/Refrigerator.glb"></a-asset-item>
                <a-asset-item id="stove" src="models/stove.glb"></a-asset-item>
                <a-asset-item id="toilet" src="models/toilet.glb"></a-asset-item>
                <a-asset-item id="floralbed" src="models/floralbed.glb"></a-asset-item>
                <a-asset-item id="fountain" src="models/fountan.glb"></a-asset-item>
                
                <!-- <a-asset-item id="mesh" src="models/mesh8.glb"></a-asset-item> -->
                <img id="wall_texture" src="textures/concrete_texture.jpg">
            </a-assets>

            <a-entity environment="preset: forest;fog:0.0;dressing:none;ground:flat;shadow:true" scale="1 1 1"></a-entity>

            <a-entity id="model" rotation="0 180 0" position="0 0.2 -12" gltf-model="#model" scale="1 1 1" animation-mixer>
            </a-entity>
            <a-entity id="bed_model" position="-4.93 0.25 -13.85" gltf-model="#bed" rotation="0 -90 0" scale="1 1 1" animation-mixer>
            </a-entity>
            <a-entity id="sofa_model" position="0.785 0.475 -16.137" gltf-model="#sofa" rotation="0 0 0" scale="1 1 1" animation-mixer>
            </a-entity>
            <a-entity id="sofa_model" position="2.2 0.475 -14.729" gltf-model="#sofa" rotation="0 -90 0" scale="1 1 1" animation-mixer>
            </a-entity>
            <a-entity id="tv_model" position="0.785 1.087 -13.219" gltf-model="#tv" rotation="0 180 0" scale="1 1 1" animation-mixer>
            </a-entity>
            <a-entity id="freez_model" position="-5.510 0.25 -11.694" gltf-model="#freez" rotation="0 90 0" scale="0.5 0.5 0.5" animation-mixer>
            </a-entity>
            <a-entity id="stove_model" position="-4.788 0.175 -8.609" gltf-model="#stove" rotation="0 180 0" scale="1 1 1">
            </a-entity>
            <a-entity id="toilet_model" position="1.2 0.637 -8.9" gltf-model="#toilet" rotation="0 0 0" scale="0.1 0.1 0.1">
            </a-entity>
            <a-entity id="floralbed1" gltf-model="#floralbed" position="-4.702 -0.102 -22.555" rotation="0 -90 0" scale="0.5 0.5 0.5"></a-entity>
            <a-entity id="floralbed2" gltf-model="#floralbed" position="6.094 -0.102 -22.555" rotation="0 -90 0" scale="0.5 0.5 0.5"></a-entity>
            <a-entity id="fountain" gltf-model="#fountain" position="-0.373 -0.029 -21.434" rotation="0 -90 0" scale="0.0125 0.0125 0.0125"></a-entity>
            <!-- <a-entity mesh id="mesh_model" rotation="0 -90 0" position="0 0.2 0" gltf-model="#mesh" scale="0.5 0.5 0.5">
            </a-entity> -->

            <a-box src="#wall_texture" position="0.636 0.923 -23.831" depth="0.254" height="2.800" width="16.000"></a-box>
            <a-box src="#wall_texture" position="-7.165 0.923 -15.924" depth="16.000" height="2.800" width="0.254"></a-box>
            <a-box src="#wall_texture" position="8.720 0.923 -15.924" depth="16.000" height="2.800" width="0.254"></a-box>




            <a-entity id="cameraRig" position="0 1.6 0" >
                <a-entity id="head" position="0 0 0" camera="userHeight:1.6" look-controls="pointerLockEnabled:true">
                    <a-entity position="0.1 -0.1 0"
                        touch-listener
                        teleport-controls=
                            "cameraRig: #cameraRig;
                            teleportOrigin: #head;
                            startEvents:starttouch;
                            endEvents:endtouch;
                            curveShootingSpeed:3;
                            hitCylinderRadius:0.1;"
                    >
                    <!-- collisionEntities: [mesh] -->
                    </a-entity>
                </a-entity>
            </a-entity>
            
            <!-- <a-entity light="type: ambient; color: #CCC"></a-entity>
             -->
            <!-- <a-entity light="type: directional; color: #EEE; intensity: 0.5" position="15.92 16.48 0"></a-entity> -->
            <!-- <a-entity light="type: directional; color: #EEE; intensity: 0.3" position="15.92 16.48 0"></a-entity> -->
            <a-entity light="type: point; intensity: 0.75; distance: 3; decay: 2"
            position="-4.7 1.7 -10"></a-entity>
        </a-scene>
        <script>
            AFRAME.registerComponent('touch-listener', {
                init: function () {
                    var targetEl = this.el;

                    //Create the touchstart event
                    document.querySelector('a-scene').addEventListener('touchstart', function () {
                    targetEl.emit('starttouch')
                    })

                    document.querySelector('a-scene').addEventListener('mousedown', function () {
                    targetEl.emit('starttouch')
                    })

                    document.body.addEventListener('keydown', function (e) {
                    if (e.keyCode == 32) {
                        console.log('space key pressed!');
                        targetEl.emit('starttouch');      
                    }  
                    })
                    
                    //Create the touchend event
                    document.querySelector('a-scene').addEventListener('touchend', function () {
                    targetEl.emit('endtouch')
                    })
                    
                    document.querySelector('a-scene').addEventListener('mouseup', function () {
                    targetEl.emit('endtouch')
                    })
                    
                    document.body.addEventListener('keyup', function (e) {
                    if (e.keyCode == 32) {
                        console.log('space key released!');
                        targetEl.emit('endtouch');      
                    }  
                    })

                    
                }
                });

        </script>
    </body>
</html>
